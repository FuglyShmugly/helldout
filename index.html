<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="css.css">

  <meta property="og:title" content="A Helldivers 2 Loadout Randomizer">
  <meta property="twitter:title" content="A Helldivers 2 Loadout Randomizer">
  <meta property="og:type" content="website">
  <meta name="og:site_name" content="Helldout">
  <meta property="og:url" content="https://helldout.onrender.com">
  <meta property="og:image" content="https://helldout.onrender.com/android-chrome-512x512.png">  
  <meta property="twitter:image" content="https://helldout.onrender.com/android-chrome-512x512.png" >
  <meta property="og:description" content="A place where you can add  more chaos to your chaos.">
  <meta name="description" content="A place where you can add  more chaos to your chaos.">
  <meta property="twitter:description" content="A place where you can add  more chaos to your chaos.">
  <meta content="summary_large_image" name="twitter:card">

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#151515">
  <meta name="msapplication-TileColor" content="#151515">
  <meta name="theme-color" content="#151515">
  <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
  <title>Helldout - A Helldivers 2 Loadout Randomizer</title>
</head>
<body>
  <div class="container">
    <center><img src="hd2logo.png" title="FOOOOOR FREEEEEEEEEEEEEEEEEDOOOOOOOOOOOOOOOM! AAAAAAAAAAAAAAAAHAHAHAHAHAHAHAHAAAAAAAAAAAAA!!" class="retry hd2logo"></center>
    <h1><a href="https://store.steampowered.com/app/553850/HELLDIVERS_2/"  target="_blank">Hell</a>o, <a href="https://store.steampowered.com/app/553850/HELLDIVERS_2/"  target="_blank">divers!</a></h1>
  This is a place where you can add even more chaos to your chaos.</br>
  Click the skull to roll.</br>
  You can also <a href="" class="share" target="_blank">share your build!</a></br>
  For Democracy, for Freedom, for Super-Earth!</br>
  <div class="buttonhere">
  </div>
  <div class="listainer">
    <ul id="randomWeaponList" class='list'><li class='title'>WEAPONS</li></ul>
    <ul id="randomStratagemList" class='list'><li class='title'>STRATAGEMS</li></ul>
    <ul id="listbooster" class='list'><li class='title'>BOOSTER</li></ul>
  </div>

  <footer>
  	
    <p class="by">by <a href="https://buymeacoffee.com/foogley" title="Buy me some ammo!" target="_blank">@Foogley</a>, 2024</p>
    </footer>
  </div>
  <script>
    $(function(){
      $('.container, footer').fadeIn('slow');
    });
    $('.retry').click(function(){
      $('.container, footer').fadeOut('slow');
      window.setTimeout(function(){
        window.location = window.location.href.split("?")[0];
      }, 600);

    });
    const weapons = [
    {"id": 1, "name": "Liberator", "type": "Primary"},
    {"id": 2, "name": "Liberator Penetrator", "type": "Primary"},
    {"id": 3, "name": "Liberator Concussive", "type": "Primary"},
    {"id": 4, "name": "Adjudicator", "type": "Primary"},
    {"id": 5, "name": "Knight", "type": "Primary"},
    {"id": 6, "name": "Defender", "type": "Primary"},
    {"id": 7, "name": "Punisher", "type": "Primary"},
    {"id": 8, "name": "Slugger", "type": "Primary"},
    {"id": 9, "name": "Breaker", "type": "Primary"},
    {"id": 10, "name": "Breaker Incendiary", "type": "Primary"},
    {"id": 11, "name": "Breaker Spray&Pray", "type": "Primary"},
    {"id": 12, "name": "Diligence", "type": "Primary"},
    {"id": 13, "name": "Diligence Counter Sniper", "type": "Primary"},
    {"id": 14, "name": "Scythe", "type": "Primary"},
    {"id": 15, "name": "Sickle", "type": "Primary"},
    {"id": 16, "name": "Scorcher", "type": "Primary"},
    {"id": 17, "name": "Punisher Plasma", "type": "Primary"},
    {"id": 18, "name": "Blitzer", "type": "Primary"},
    {"id": 19, "name": "Dominator", "type": "Primary"},
    {"id": 20, "name": "Eruptor", "type": "Primary"},
    {"id": 21, "name": "Exploding Crossbow", "type": "Primary"},
    {"id": 22, "name": "Peacemaker", "type": "Secondary"},
    {"id": 23, "name": "Redeemer", "type": "Secondary"},
    {"id": 24, "name": "Senator", "type": "Secondary"},
    {"id": 25, "name": "Dagger", "type": "Secondary"},
    {"id": 26, "name": "Grenade Pistol", "type": "Secondary"},
    {"id": 27, "name": "High Explosive Grenade", "type": "Grenade"},
    {"id": 28, "name": "Frag Grenade", "type": "Grenade"},
    {"id": 29, "name": "Impact Grenade", "type": "Grenade"},
    {"id": 30, "name": "Smoke Grenade", "type": "Grenade"},
    {"id": 31, "name": "Incendiary Grenade", "type": "Grenade"},
    {"id": 32, "name": "Stun Grenade", "type": "Grenade"},
    {"id": 33, "name": "Thermite Grenade", "type": "Grenade"},
    {"id": 34, "name": "Stamina Enhancement", "type": "Booster"},
    {"id": 35, "name": "UAV Recon", "type": "Booster"},
    {"id": 36, "name": "Vitality Enhancement", "type": "Booster"},
    {"id": 37, "name": "Flexible Reinforcement Budget", "type": "Booster"},
    {"id": 38, "name": "Localization Confusion", "type": "Booster"},
    {"id": 39, "name": "Expert Extraction Pilot", "type": "Booster"},
    {"id": 40, "name": "Hellpod Space Optimization", "type": "Booster"},
    {"id": 41, "name": "Increased Reinforcement Budget", "type": "Booster"},
    {"id": 42, "name": "Muscle Enhancement", "type": "Booster"}
      ];
    const stratagems = [
    {"id": 1, "name": "Airburst Rocket Launcher", "type": "Weapon", "backpack": false},
    {"id": 2, "name": "Anti-Materiel Rifle", "type": "Weapon", "backpack": false},
    {"id": 3, "name": "Anti-Personnel Minefield", "type": "Anti-Personnel Minefield", "backpack": false},
    // {"id": 4, "name": "Anti-Tank Mines", "type": "Anti-Tank Mines", "backpack": false},
    {"id": 5, "name": "Arc Thrower", "type": "Weapon", "backpack": false},
    {"id": 6, "name": "Autocannon Sentry", "type": "Autocannon Sentry", "backpack": false},
    {"id": 7, "name": "Autocannon", "type": "Weapon", "backpack": true},
    {"id": 8, "name": "Ballistic Shield Backpack", "type": "Ballistic Shield Backpack", "backpack": true},
    {"id": 9, "name": "Eagle 110MM Rocket Pods", "type": "Eagle 110MM Rocket Pods", "backpack": false},
    {"id": 10, "name": "Eagle 500KG Bomb", "type": "Eagle 500KG Bomb", "backpack": false},
    {"id": 11, "name": "Eagle Airstrike", "type": "Eagle Airstrike", "backpack": false},
    {"id": 12, "name": "Eagle Cluster Bomb", "type": "Eagle Cluster Bomb", "backpack": false},
    {"id": 13, "name": "Eagle Napalm Airstrike", "type": "Eagle Napalm Airstrike", "backpack": false},
    {"id": 14, "name": "Eagle Smoke Strike", "type": "Eagle Smoke Strike", "backpack": false},
    {"id": 15, "name": "Eagle Strafing Run", "type": "Eagle Strafing Run", "backpack": false},
    {"id": 16, "name": "EMS Mortar Sentry", "type": "EMS Mortar Sentry", "backpack": false},
    {"id": 17, "name": "Expendable Anti-Tank", "type": "Expendable Anti-Tank", "backpack": false},
    {"id": 18, "name": "Flamethrower", "type": "Weapon", "backpack": false},
    {"id": 19, "name": "Gatling Sentry", "type": "Gatling Sentry", "backpack": false},
    {"id": 20, "name": "Grenade Launcher", "type": "Weapon", "backpack": false},
    {"id": 21, "name": "Guard Dog Rover", "type": "Guard Dog Rover", "backpack": true},
    {"id": 22, "name": "Guard Dog", "type": "Guard Dog", "backpack": true},
    {"id": 23, "name": "Heavy Machine Gun", "type": "Weapon", "backpack": false},
    {"id": 24, "name": "HMG Emplacement", "type": "HMG Emplacement", "backpack": false},
    {"id": 25, "name": "Incendiary Mines", "type": "Incendiary Mines", "backpack": false},
    {"id": 26, "name": "Jump Pack", "type": "Jump Pack", "backpack": true},
    {"id": 27, "name": "Laser Cannon", "type": "Weapon", "backpack": false},
    {"id": 28, "name": "Machine Gun Sentry", "type": "Machine Gun Sentry", "backpack": false},
    {"id": 29, "name": "Machine Gun", "type": "Weapon", "backpack": false},
    {"id": 30, "name": "Mortar Sentry", "type": "Mortar Sentry", "backpack": false},
    {"id": 31, "name": "Orbital 120MM HE Barrage", "type": "Orbital 120MM HE Barrage", "backpack": false},
    {"id": 32, "name": "Orbital 380MM HE Barrage", "type": "Orbital 380MM HE Barrage", "backpack": false},
    {"id": 33, "name": "Orbital Airburst Strike", "type": "Orbital Airburst Strike", "backpack": false},
    {"id": 34, "name": "Orbital EMS Strike", "type": "Orbital EMS Strike", "backpack": false},
    {"id": 35, "name": "Orbital Gas Strike", "type": "Orbital Gas Strike", "backpack": false},
    {"id": 36, "name": "Orbital Gatling Barrage", "type": "Orbital Gatling Barrage", "backpack": false},
    {"id": 37, "name": "Orbital Laser", "type": "Orbital Laser", "backpack": false},
    {"id": 38, "name": "Orbital Precision Strike", "type": "Orbital Precision Strike", "backpack": false},
    {"id": 39, "name": "Orbital Railcannon Strike", "type": "Orbital Railcannon Strike", "backpack": false},
    {"id": 40, "name": "Orbital Smoke Strike", "type": "Orbital Smoke Strike", "backpack": false},
    {"id": 41, "name": "Orbital Walking Barrage", "type": "Orbital Walking Barrage", "backpack": false},
    {"id": 42, "name": "Patriot Exosuit", "type": "Patriot Exosuit", "backpack": false},
    {"id": 43, "name": "Quasar Cannon", "type": "Weapon", "backpack": false},
    {"id": 44, "name": "Railgun", "type": "Weapon", "backpack": false},
    {"id": 45, "name": "Recoilless Rifle", "type": "Weapon", "backpack": true},
    {"id": 46, "name": "Rocket Sentry", "type": "Rocket Sentry", "backpack": false},
    {"id": 47, "name": "Shield Generator Pack", "type": "Shield Generator Pack", "backpack": true},
    {"id": 48, "name": "Shield Generator Relay", "type": "Shield Generator Relay", "backpack": false},
    {"id": 49, "name": "Spear", "type": "Weapon", "backpack": true},
    {"id": 50, "name": "Stalwart", "type": "Weapon", "backpack": false},
    {"id": 51, "name": "Supply Pack", "type": "Supply Pack", "backpack": true},
    {"id": 52, "name": "Tesla Tower", "type": "Tesla Tower", "backpack": false}
      ];

const queryString = window.location.search;
// console.log(queryString);
const urlParams = new URLSearchParams(queryString);

// Function to parse URL parameters and extract IDs
function parseURLParams(url) {
    const params = {};
    const queryString = url.split('?')[1];
    if (queryString) {
        const paramPairs = queryString.split('&');
        paramPairs.forEach(pair => {
            const [key, value] = pair.split('=');
            params[key] = value.split('-').map(id => parseInt(id)); // Convert IDs to integers
        });
    }
    return params;
}
const parsedParams = parseURLParams(queryString);
let selectedWeapons = '';
let selectedStratagems = '';
function hasKeys(obj, key1, key2) {
    return obj.hasOwnProperty(key1) && obj.hasOwnProperty(key2);
}
let containsKeys = hasKeys(parsedParams, 'w', 's');
if (containsKeys)
{
selectedWeapons = weapons.filter(weapon => parsedParams['w'].includes(weapon.id));
selectedStratagems = stratagems.filter(stratagem => parsedParams['s'].includes(stratagem.id));
}
function getRandomstratagems(array) {
  const selectedItems = [];
  const typesCount = {};
  while (selectedItems.length < 4) {
    const randomIndex = Math.floor(Math.random() * array.length);
    const currentItem = array[randomIndex];
    if (typesCount[currentItem.type] && typesCount[currentItem.type] > 0) {
      continue;
    }
    if (currentItem.backpack && selectedItems.some(item => item.backpack)) {
      continue;
    }
    selectedItems.push(currentItem);
    typesCount[currentItem.type] = (typesCount[currentItem.type] || 0) + 1;
  }

  return selectedItems;
}

function getRandomweapons(array) {
  const selectedItems = [];
  const typesCount = {};
  while (selectedItems.length < 4) {
    const randomIndex = Math.floor(Math.random() * array.length);
    const currentItem = array[randomIndex];
    if (typesCount[currentItem.type] && typesCount[currentItem.type] > 0) {
      continue;
    }
    selectedItems.push(currentItem);
    typesCount[currentItem.type] = (typesCount[currentItem.type] || 0) + 1;
  }
  return selectedItems;
}
const typeOrder = ['Primary', 'Secondary', 'Grenade', 'Booster'];

let randomstratagems = getRandomstratagems(stratagems);
let randomweapons = getRandomstratagems(weapons);
randomweapons.sort((a, b) => {
return typeOrder.indexOf(a.type) - typeOrder.indexOf(b.type);
});

if (selectedWeapons.length > 0 && selectedStratagems.length > 0) {
randomstratagems = selectedStratagems;
randomweapons = selectedWeapons;
randomweapons.sort((a, b) => {
  return typeOrder.indexOf(a.type) - typeOrder.indexOf(b.type);
});
}

randomstratagems.forEach(stratagem => {
  const img = document.createElement('img');
  const li = document.createElement('li');
  const li2 = document.createElement('li');
  img.src = "icons/"+stratagem.name+".svg";
  img.alt = stratagem.name;
  // img.title = stratagem.name;
  img.classList.add('loadout-icon');
  li.appendChild(document.createTextNode(stratagem.name));
  li2.appendChild(img);
  randomStratagemList.appendChild(li);
  randomStratagemList.appendChild(li2);
});
randomweapons.forEach(weapon => {
  const img = document.createElement('img');
  const li = document.createElement('li');
  const li2 = document.createElement('li');
  img.src = "icons/"+weapon.name+".webp";
  img.alt = weapon.name;
  // img.title = weapon.name;
  li.appendChild(document.createTextNode(weapon.name));
  li2.appendChild(img);
  if (weapon.type=='Booster')
  {
    img.classList.add('booster');
    listbooster.appendChild(li);
    listbooster.appendChild(li2);
  }
  else
  { 
    img.classList.add('loadout-icon');
    randomWeaponList.appendChild(li);
    randomWeaponList.appendChild(li2);
  }
});

function buildURL(weapons, stratagems) {
    let baseURL = 'https://helldout.onrender.com/?';
    let weaponParam = 'w=' + weapons.map(weapon => weapon.id).join('-');
    let stratagemParam = 's=' + stratagems.map(stratagem => stratagem.id).join('-');
    let url = baseURL + weaponParam + '&' + stratagemParam;
    return url;
}
let url = buildURL(randomweapons, randomstratagems);
$('.share').attr('href',url);
</script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-C3NR31PWZP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-C3NR31PWZP');
</script>
</body>
</html>
